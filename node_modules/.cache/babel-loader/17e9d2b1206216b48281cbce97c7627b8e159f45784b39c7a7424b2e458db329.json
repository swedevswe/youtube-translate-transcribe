{"ast":null,"code":"import prepare from './00-prep.js';\nimport findRules from './01-findRules.js';\nimport shareBackward from './02-share-back.js';\nconst defaults = {\n  threshold: 80,\n  min: 0\n};\nconst swap = a => [a[1], a[0]];\nconst learn = function (pairs) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  opts = Object.assign({}, defaults, opts);\n  let ex = {};\n  let rev = {};\n  pairs = prepare(pairs, ex);\n  // get forward-dir rules\n  let {\n    rules,\n    pending,\n    finished\n  } = findRules(pairs, [], opts);\n  // move some to both\n  let {\n    fwd,\n    both,\n    revPairs\n  } = shareBackward(rules, pairs.map(swap), opts);\n  // generate remaining reverse-dir rules\n  let pendingBkwd = [];\n  if (opts.reverse !== false) {\n    // console.log(revPairs.pending)\n    let bkwd = findRules(revPairs.pending, revPairs.finished, opts);\n    pendingBkwd = bkwd.pending;\n    rev = bkwd.rules;\n  }\n  // console.log(pending.length, 'pending fwd')\n  // console.log(pendingBkwd.length, 'pending Bkwd')\n  // add anything remaining as an exception\n  if (opts.min <= 1) {\n    pending.forEach(arr => {\n      ex[arr[0]] = arr[1];\n    });\n    pendingBkwd.forEach(arr => {\n      ex[arr[1]] = arr[0];\n    });\n  }\n  return {\n    fwd,\n    both,\n    rev,\n    ex\n  };\n};\nexport default learn;","map":{"version":3,"names":["prepare","findRules","shareBackward","defaults","threshold","min","swap","a","learn","pairs","opts","arguments","length","undefined","Object","assign","ex","rev","rules","pending","finished","fwd","both","revPairs","map","pendingBkwd","reverse","bkwd","forEach","arr"],"sources":["C:/Users/swths/node_modules/suffix-thumb/src/learn/index.js"],"sourcesContent":["import prepare from './00-prep.js'\nimport findRules from './01-findRules.js'\nimport shareBackward from './02-share-back.js'\n\nconst defaults = {\n  threshold: 80,\n  min: 0\n}\nconst swap = (a) => [a[1], a[0]]\n\nconst learn = function (pairs, opts = {}) {\n  opts = Object.assign({}, defaults, opts)\n  let ex = {}\n  let rev = {}\n  pairs = prepare(pairs, ex)\n  // get forward-dir rules\n  let { rules, pending, finished } = findRules(pairs, [], opts)\n  // move some to both\n  let { fwd, both, revPairs } = shareBackward(rules, pairs.map(swap), opts)\n  // generate remaining reverse-dir rules\n  let pendingBkwd = []\n  if (opts.reverse !== false) {\n    // console.log(revPairs.pending)\n    let bkwd = findRules(revPairs.pending, revPairs.finished, opts)\n    pendingBkwd = bkwd.pending\n    rev = bkwd.rules\n  }\n  // console.log(pending.length, 'pending fwd')\n  // console.log(pendingBkwd.length, 'pending Bkwd')\n  // add anything remaining as an exception\n  if (opts.min <= 1) {\n    pending.forEach(arr => {\n      ex[arr[0]] = arr[1]\n    })\n    pendingBkwd.forEach(arr => {\n      ex[arr[1]] = arr[0]\n    })\n  }\n  return {\n    fwd,\n    both,\n    rev,\n    ex,\n  }\n}\nexport default learn"],"mappings":"AAAA,OAAOA,OAAO,MAAM,cAAc;AAClC,OAAOC,SAAS,MAAM,mBAAmB;AACzC,OAAOC,aAAa,MAAM,oBAAoB;AAE9C,MAAMC,QAAQ,GAAG;EACfC,SAAS,EAAE,EAAE;EACbC,GAAG,EAAE;AACP,CAAC;AACD,MAAMC,IAAI,GAAIC,CAAC,IAAK,CAACA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;AAEhC,MAAMC,KAAK,GAAG,SAAAA,CAAUC,KAAK,EAAa;EAAA,IAAXC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACtCD,IAAI,GAAGI,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEZ,QAAQ,EAAEO,IAAI,CAAC;EACxC,IAAIM,EAAE,GAAG,CAAC,CAAC;EACX,IAAIC,GAAG,GAAG,CAAC,CAAC;EACZR,KAAK,GAAGT,OAAO,CAACS,KAAK,EAAEO,EAAE,CAAC;EAC1B;EACA,IAAI;IAAEE,KAAK;IAAEC,OAAO;IAAEC;EAAS,CAAC,GAAGnB,SAAS,CAACQ,KAAK,EAAE,EAAE,EAAEC,IAAI,CAAC;EAC7D;EACA,IAAI;IAAEW,GAAG;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGrB,aAAa,CAACgB,KAAK,EAAET,KAAK,CAACe,GAAG,CAAClB,IAAI,CAAC,EAAEI,IAAI,CAAC;EACzE;EACA,IAAIe,WAAW,GAAG,EAAE;EACpB,IAAIf,IAAI,CAACgB,OAAO,KAAK,KAAK,EAAE;IAC1B;IACA,IAAIC,IAAI,GAAG1B,SAAS,CAACsB,QAAQ,CAACJ,OAAO,EAAEI,QAAQ,CAACH,QAAQ,EAAEV,IAAI,CAAC;IAC/De,WAAW,GAAGE,IAAI,CAACR,OAAO;IAC1BF,GAAG,GAAGU,IAAI,CAACT,KAAK;EAClB;EACA;EACA;EACA;EACA,IAAIR,IAAI,CAACL,GAAG,IAAI,CAAC,EAAE;IACjBc,OAAO,CAACS,OAAO,CAACC,GAAG,IAAI;MACrBb,EAAE,CAACa,GAAG,CAAC,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC;IACrB,CAAC,CAAC;IACFJ,WAAW,CAACG,OAAO,CAACC,GAAG,IAAI;MACzBb,EAAE,CAACa,GAAG,CAAC,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC;IACrB,CAAC,CAAC;EACJ;EACA,OAAO;IACLR,GAAG;IACHC,IAAI;IACJL,GAAG;IACHD;EACF,CAAC;AACH,CAAC;AACD,eAAeR,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}