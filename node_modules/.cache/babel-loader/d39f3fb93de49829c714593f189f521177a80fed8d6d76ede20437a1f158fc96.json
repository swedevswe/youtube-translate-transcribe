{"ast":null,"code":"import canBe from './canBe.js';\nconst tagger = function (list, document, world) {\n  const {\n    model,\n    methods\n  } = world;\n  const {\n    getDoc,\n    setTag,\n    unTag\n  } = methods.one;\n  const looksPlural = methods.two.looksPlural;\n  if (list.length === 0) {\n    return list;\n  }\n  // some logging for debugging\n  const env = typeof process === 'undefined' || !process.env ? self.env || {} : process.env;\n  if (env.DEBUG_TAGS) {\n    console.log(\"\\n\\n  \\x1B[32m\\u2192 \".concat(list.length, \" post-tagger:\\x1B[0m\")); //eslint-disable-line\n  }\n  return list.map(todo => {\n    if (!todo.tag && !todo.chunk && !todo.unTag) {\n      return;\n    }\n    let reason = todo.reason || todo.match;\n    let terms = getDoc([todo.pointer], document)[0];\n    // handle 'safe' tag\n    if (todo.safe === true) {\n      // check for conflicting tags\n      if (canBe(terms, todo.tag, model) === false) {\n        return;\n      }\n      // dont tag half of a hyphenated word\n      if (terms[terms.length - 1].post === '-') {\n        return;\n      }\n    }\n    if (todo.tag !== undefined) {\n      setTag(terms, todo.tag, world, todo.safe, \"[post] '\".concat(reason, \"'\"));\n      // quick and dirty plural tagger ðŸ˜•\n      if (todo.tag === 'Noun' && looksPlural) {\n        let term = terms[terms.length - 1];\n        if (looksPlural(term.text)) {\n          setTag([term], 'Plural', world, todo.safe, 'quick-plural');\n        } else {\n          setTag([term], 'Singular', world, todo.safe, 'quick-singular');\n        }\n      }\n      // allow freezing this match, too\n      if (todo.freeze === true) {\n        terms.forEach(term => term.frozen = true);\n      }\n    }\n    if (todo.unTag !== undefined) {\n      unTag(terms, todo.unTag, world, todo.safe, reason);\n    }\n    // allow setting chunks, too\n    if (todo.chunk) {\n      terms.forEach(t => t.chunk = todo.chunk);\n    }\n  });\n};\nexport default tagger;","map":{"version":3,"names":["canBe","tagger","list","document","world","model","methods","getDoc","setTag","unTag","one","looksPlural","two","length","env","process","self","DEBUG_TAGS","console","log","concat","map","todo","tag","chunk","reason","match","terms","pointer","safe","post","undefined","term","text","freeze","forEach","frozen","t"],"sources":["C:/Users/swths/node_modules/compromise/src/1-one/sweep/methods/tagger/index.js"],"sourcesContent":["import canBe from './canBe.js'\n\nconst tagger = function (list, document, world) {\n  const { model, methods } = world\n  const { getDoc, setTag, unTag } = methods.one\n  const looksPlural = methods.two.looksPlural\n  if (list.length === 0) {\n    return list\n  }\n  // some logging for debugging\n  const env = typeof process === 'undefined' || !process.env ? self.env || {} : process.env\n  if (env.DEBUG_TAGS) {\n    console.log(`\\n\\n  \\x1b[32mâ†’ ${list.length} post-tagger:\\x1b[0m`) //eslint-disable-line\n  }\n  return list.map(todo => {\n    if (!todo.tag && !todo.chunk && !todo.unTag) {\n      return\n    }\n    let reason = todo.reason || todo.match\n    let terms = getDoc([todo.pointer], document)[0]\n    // handle 'safe' tag\n    if (todo.safe === true) {\n      // check for conflicting tags\n      if (canBe(terms, todo.tag, model) === false) {\n        return\n      }\n      // dont tag half of a hyphenated word\n      if (terms[terms.length - 1].post === '-') {\n        return\n      }\n    }\n    if (todo.tag !== undefined) {\n      setTag(terms, todo.tag, world, todo.safe, `[post] '${reason}'`)\n      // quick and dirty plural tagger ðŸ˜•\n      if (todo.tag === 'Noun' && looksPlural) {\n        let term = terms[terms.length - 1]\n        if (looksPlural(term.text)) {\n          setTag([term], 'Plural', world, todo.safe, 'quick-plural')\n        } else {\n          setTag([term], 'Singular', world, todo.safe, 'quick-singular')\n        }\n      }\n      // allow freezing this match, too\n      if (todo.freeze === true) {\n        terms.forEach(term => (term.frozen = true))\n      }\n    }\n    if (todo.unTag !== undefined) {\n      unTag(terms, todo.unTag, world, todo.safe, reason)\n    }\n    // allow setting chunks, too\n    if (todo.chunk) {\n      terms.forEach(t => (t.chunk = todo.chunk))\n    }\n  })\n}\nexport default tagger\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,YAAY;AAE9B,MAAMC,MAAM,GAAG,SAAAA,CAAUC,IAAI,EAAEC,QAAQ,EAAEC,KAAK,EAAE;EAC9C,MAAM;IAAEC,KAAK;IAAEC;EAAQ,CAAC,GAAGF,KAAK;EAChC,MAAM;IAAEG,MAAM;IAAEC,MAAM;IAAEC;EAAM,CAAC,GAAGH,OAAO,CAACI,GAAG;EAC7C,MAAMC,WAAW,GAAGL,OAAO,CAACM,GAAG,CAACD,WAAW;EAC3C,IAAIT,IAAI,CAACW,MAAM,KAAK,CAAC,EAAE;IACrB,OAAOX,IAAI;EACb;EACA;EACA,MAAMY,GAAG,GAAG,OAAOC,OAAO,KAAK,WAAW,IAAI,CAACA,OAAO,CAACD,GAAG,GAAGE,IAAI,CAACF,GAAG,IAAI,CAAC,CAAC,GAAGC,OAAO,CAACD,GAAG;EACzF,IAAIA,GAAG,CAACG,UAAU,EAAE;IAClBC,OAAO,CAACC,GAAG,yBAAAC,MAAA,CAAoBlB,IAAI,CAACW,MAAM,yBAAsB,CAAC,EAAC;EACpE;EACA,OAAOX,IAAI,CAACmB,GAAG,CAACC,IAAI,IAAI;IACtB,IAAI,CAACA,IAAI,CAACC,GAAG,IAAI,CAACD,IAAI,CAACE,KAAK,IAAI,CAACF,IAAI,CAACb,KAAK,EAAE;MAC3C;IACF;IACA,IAAIgB,MAAM,GAAGH,IAAI,CAACG,MAAM,IAAIH,IAAI,CAACI,KAAK;IACtC,IAAIC,KAAK,GAAGpB,MAAM,CAAC,CAACe,IAAI,CAACM,OAAO,CAAC,EAAEzB,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC/C;IACA,IAAImB,IAAI,CAACO,IAAI,KAAK,IAAI,EAAE;MACtB;MACA,IAAI7B,KAAK,CAAC2B,KAAK,EAAEL,IAAI,CAACC,GAAG,EAAElB,KAAK,CAAC,KAAK,KAAK,EAAE;QAC3C;MACF;MACA;MACA,IAAIsB,KAAK,CAACA,KAAK,CAACd,MAAM,GAAG,CAAC,CAAC,CAACiB,IAAI,KAAK,GAAG,EAAE;QACxC;MACF;IACF;IACA,IAAIR,IAAI,CAACC,GAAG,KAAKQ,SAAS,EAAE;MAC1BvB,MAAM,CAACmB,KAAK,EAAEL,IAAI,CAACC,GAAG,EAAEnB,KAAK,EAAEkB,IAAI,CAACO,IAAI,aAAAT,MAAA,CAAaK,MAAM,MAAG,CAAC;MAC/D;MACA,IAAIH,IAAI,CAACC,GAAG,KAAK,MAAM,IAAIZ,WAAW,EAAE;QACtC,IAAIqB,IAAI,GAAGL,KAAK,CAACA,KAAK,CAACd,MAAM,GAAG,CAAC,CAAC;QAClC,IAAIF,WAAW,CAACqB,IAAI,CAACC,IAAI,CAAC,EAAE;UAC1BzB,MAAM,CAAC,CAACwB,IAAI,CAAC,EAAE,QAAQ,EAAE5B,KAAK,EAAEkB,IAAI,CAACO,IAAI,EAAE,cAAc,CAAC;QAC5D,CAAC,MAAM;UACLrB,MAAM,CAAC,CAACwB,IAAI,CAAC,EAAE,UAAU,EAAE5B,KAAK,EAAEkB,IAAI,CAACO,IAAI,EAAE,gBAAgB,CAAC;QAChE;MACF;MACA;MACA,IAAIP,IAAI,CAACY,MAAM,KAAK,IAAI,EAAE;QACxBP,KAAK,CAACQ,OAAO,CAACH,IAAI,IAAKA,IAAI,CAACI,MAAM,GAAG,IAAK,CAAC;MAC7C;IACF;IACA,IAAId,IAAI,CAACb,KAAK,KAAKsB,SAAS,EAAE;MAC5BtB,KAAK,CAACkB,KAAK,EAAEL,IAAI,CAACb,KAAK,EAAEL,KAAK,EAAEkB,IAAI,CAACO,IAAI,EAAEJ,MAAM,CAAC;IACpD;IACA;IACA,IAAIH,IAAI,CAACE,KAAK,EAAE;MACdG,KAAK,CAACQ,OAAO,CAACE,CAAC,IAAKA,CAAC,CAACb,KAAK,GAAGF,IAAI,CAACE,KAAM,CAAC;IAC5C;EACF,CAAC,CAAC;AACJ,CAAC;AACD,eAAevB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}